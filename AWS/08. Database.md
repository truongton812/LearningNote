# RDS

RDS Oracle instance là một thực thể cơ sở dữ liệu riêng biệt do dịch vụ Amazon RDS quản lý, chạy engine Oracle trong môi trường đám mây AWS. Mỗi instance có cấu hình tài nguyên riêng (CPU, RAM, storage) và là nơi lưu trữ dữ liệu cũng như xử lý các truy vấn từ ứng dụng.​

Một RDS instance là một cơ sở dữ liệu hoạt động độc lập mà bạn có thể kết nối trực tiếp để đọc và ghi dữ liệu.

Nó không giống với Read Replica. Read Replica là bản sao chỉ đọc của một instance chính, dùng để xử lý các truy vấn chỉ đọc, giảm tải cho instance chính và giúp tăng khả năng mở rộng đọc. Read Replica sao chép dữ liệu từ instance chính một cách không đồng bộ.​

Tóm lại, instance là thực thể cơ sở dữ liệu chính (có thể đọc và ghi), còn read replicas là các bản sao phụ chỉ để đọc, hỗ trợ phân phối tải đọc hiệu quả hơn.

Trong mô hình chuẩn, một database Oracle trong RDS thường chỉ chạy trên một instance chính.

Để mở rộng hoặc tăng tính sẵn sàng, người dùng có thể tạo nhiều instance như read replicas hoặc standalone cho các mục đích như phân tải đọc, backup hoặc failover.

Scale trong AWS RDS Oracle:

- Scale đọc (Read Replica): Hỗ trợ tạo các read replicas để phân tải truy vấn đọc và tăng khả năng mở rộng đọc của hệ thống.​

- Vertical Scaling: Tăng cường tài nguyên cho instance như CPU, RAM, và lưu trữ thông qua thao tác thủ công hoặc tự động, phù hợp cho các tình huống cần tăng hiệu năng ngay lập tức.​


---


ACU là đơn vị đo “sức mạnh compute” mà Aurora Serverless v2 dùng để tính cả năng lực xử lý và chi phí. Mỗi ACU tương ứng khoảng 2 GiB RAM kèm CPU và mạng tỷ lệ với lượng RAM đó.​

Aurora Serverless v2 không dùng instance type (db.r6g.large, v.v.) mà dùng dải ACU, ví dụ 2–8 ACU, để quyết định tài nguyên được cấp cho database tại mỗi thời điểm.​

Mỗi ACU ~ 2 GiB bộ nhớ + phần CPU và network tương ứng, nên 8 ACU sẽ gần giống một máy có ~16 GiB RAM + CPU đủ mạnh để xử lý tải tương ứng.​


Aurora Serverless v2 tự động scale ACU lên/xuống theo tải thực tế (CPU, connection, I/O…), và có thể tăng/giảm theo bước 0.5 ACU nên rất mịn, tránh over‑provision nhiều.​ Bạn chỉ cấu hình min ACU và max ACU; trong khoảng đó, Aurora có thể scale trong mili‑giây mà không làm mất kết nối của ứng dụng, miễn là workload còn nằm trong dải cấu hình.​

Bạn trả tiền theo số ACU đang chạy trung bình theo giờ; càng nhiều ACU và càng chạy lâu (không scale xuống) thì bill càng cao.​

Do giá mỗi ACU khá cố định, tối ưu chi phí chủ yếu là: hạ min ACU khi idle, giữ max ACU đủ dùng, và để Aurora tự scale theo tải thay vì “dính” ở mức cao như 8 ACU suốt cả tuần.​

---

RDS PostgreSQL “thuần” (DB instance thông thường) không có cluster endpoint như Aurora, mà chỉ có endpoint cho từng DB instance (và nếu dùng Multi‑AZ DB cluster mới kiểu 2022 thì endpoint của cluster đó khác Aurora cluster endpoint truyền thống).
​

RDS PostgreSQL thông thường
- Kiểu triển khai phổ biến là single‑AZ hoặc Multi‑AZ DB instance, mỗi instance có một endpoint riêng (DNS name) dùng để kết nối.
​- Endpoint này không tự động load‑balance giữa nhiều reader như Aurora reader endpoint, nên nếu có read replica thì mỗi replica cũng có endpoint riêng.
​

Multi‑AZ DB cluster mới
- AWS có loại RDS Multi‑AZ DB cluster cho PostgreSQL với nhiều writer/reader node, loại này cung cấp cluster endpoint và các reader endpoint tương tự Aurora, nhưng đó là một option riêng khi tạo RDS, không phải “RDS Postgres thuần” mặc định


---

<img width="1565" height="252" alt="image" src="https://github.com/user-attachments/assets/308fd662-56f4-4da6-99a6-7d6496abf716" />

Trong ảnh thì
- buzz-ticket-production là DB cluster Aurora: nó đại diện cho cụm database (storage volume chung, endpoint dạng cluster-...) và chứa cấu hình chung như engine, version, capacity range, backup, v.v.​

- buzz-ticket-production-instance-1 là DB instance bên trong cluster đó: đây là compute node cụ thể (Serverless v2 2–256 ACUs) xử lý query, với endpoint riêng dạng instance endpoint.​




Cluster metrics thường đo ở mức cụm: số kết nối tổng, replica lag, IOPS/throughput tổng, dung lượng storage, backup, v.v. và có thể gộp từ nhiều instance trong cluster (nếu có).​

Instance metrics đo tài nguyên compute của từng instance: CPU utilization, ACU đang dùng, memory, network, read/write IOPS mà instance đó xử lý, nên nếu sau này có thêm reader instance thì mỗi instance sẽ có đường metric riêng.​

Metric của buzz-ticket-production (cluster) và buzz-ticket-production-instance-1 (instance) có khác nhau kể cả khi cluster có 1 instance. Nguyên nhân là do ở mức cluster, một số metric là tổng/hàm tổng hợp và được tính theo logic riêng (ví dụ dựa trên volume, storage, I/O của toàn cụm), nên giá trị và tần suất ghi có thể khác metric ở mức instance, vốn đo trực tiếp CPU, ACU, network của buzz-ticket-production-instance-1.
​
Aurora còn có metric chỉ tồn tại ở cluster (ví dụ volume bytes used) hoặc chỉ tồn tại ở instance (ví dụ CPUUtilization, ACU usage)​

Các  metric có thể trùng tên nhưng namespace khác (Aurora/Cluster vs Aurora/Instance) và cách tính khác một chút, nên khi vẽ graph có thể lệch nhẹ hoặc khác hẳn (nhất là các metric về I/O, connection, latency); chỉ những metric thực sự “forward” từ instance lên cluster mới gần giống nhau
