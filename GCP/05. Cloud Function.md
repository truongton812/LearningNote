# Cloud function

- Là dịch vụ serverless dùng để thực thi các function trên GCP
- Max execution time là 10 phút hoặc 60 phút đối với function được trigger bởi HTTPS request
- Max allocated memory là 16GB
- Max concurrent requests/ 1 function instance là 1000
- Khi deploy 1 Cloud Function, bản chất GCP sẽ dùng Cloud Build để build ra image và khởi chạy image đấy bằng Cloud Run -> có thể có multiple revision của 1 function và được hỗ trợ tính năng split traffic (cần vào trong Cloud Run để thực hiện)
- Trường "trigger" khi tạo Cloud Function trên Google Cloud Platform (GCP) dùng để chỉ sự kiện hoặc điều kiện kích hoạt hàm thực thi. Các loại trigger phổ biến gồm:
  - HTTP trigger: hàm được kích hoạt khi nhận được một yêu cầu HTTP.
  - Pub/Sub trigger: hàm được kích hoạt khi có thông điệp mới trong một chủ đề Pub/Sub.
  - Cloud Storage trigger: hàm chạy khi có sự kiện liên quan đến file trong bucket Cloud Storage (ví dụ tạo, cập nhật file).
  - Các trigger khác từ Firebase hoặc các sự kiện hệ thống GCP như thay đổi dữ liệu trong Realtime Database, Firestore, v.v.
  - Log từ Cloud Logging
....Và còn nhiều nữa

- để cloud function 1 invoke cloud function 2 thì function 1 cần có role roles/cloudfunction.invokers

---

## Cold start

- Ở Cloud Function gen 1, mỗi 1 function instance chỉ có thể handle 1 request -> có 3 concurrent function invocations thì cần 3 function instances
- Mỗi 1 function instance khởi tạo mới đều cần thời gian gọi là cold start
- Để hạn chế cold start thì cần config số lượng instance tối thiểu (mất phí nhiều hơn), VD config minimum instance là 10
- Tuy nhiên Cloud Function gen 2 update mỗi function instance có thể handle nhiều requests đồng thời (có thể config), max là 1000
