Project trong Google Cloud Platform (GCP) là một đơn vị tổ chức cơ bản để quản lý và sử dụng các tài nguyên của Google Cloud. Mỗi project là không gian riêng biệt chứa tất cả tài nguyên như máy ảo, cơ sở dữ liệu, bucket lưu trữ, ứng dụng... và được dùng để quản lý quyền truy cập, thanh toán, cũng như theo dõi chi phí riêng biệt cho từng hệ thống hoặc môi trường (phát triển, thử nghiệm, sản xuất). Project cũng giúp bạn quản lý API, bật tắt dịch vụ, thêm hoặc xoá cộng tác viên, và kiểm soát quyền truy cập qua cơ chế IAM (Identity and Access Management). Mỗi project có tên và ID duy nhất được dùng để nhận dạng và phân biệt trong toàn bộ Google Cloud.

Phân chia nhiều project trong Google Cloud Platform (GCP) được thực hiện để:

- Tách biệt tài nguyên theo nhóm, môi trường hoặc mục đích sử dụng riêng biệt (ví dụ phát triển, thử nghiệm, sản xuất) giúp tổ chức quản lý dễ dàng và tránh nhầm lẫn.

- Quản lý quyền truy cập chính xác, cho phép cấp quyền khác nhau cho từng project, bảo vệ bảo mật và kiểm soát truy cập riêng biệt.

- Theo dõi chi phí chi tiết và phân bổ ngân sách rõ ràng cho từng nhóm hoặc hệ thống mà không bị lẫn lộn chi phí giữa các tài nguyên.

- Hạn chế rủi ro và gián đoạn: nếu một project gặp sự cố thì không ảnh hưởng đến các project khác vì các tài nguyên và dịch vụ được cô lập.

- Dễ dàng quản lý, tự động hóa và mở rộng khi mỗi project được độc lập vận hành, phù hợp cho tổ chức lớn hoặc môi trường đa đội nhóm.

Các thành phần ở 2 project khác nhau trong Google Cloud Platform (GCP) hoàn toàn có thể giao tiếp với nhau, tuy nhiên cần được cấu hình và cấp phép đúng cách.

---

IP public gọi là external ip addresses

Muốn dùng static ip address thì cần "Reserver static address"

Khi gán static ip address cho VM thì ephemeral public IP sẽ bị remove

Static IP có thể switch cho VM instance khác trong cùng project và region

Trong GCP
- Startup script = User data
- instance template: dùng để định nghĩa template để tạo nhanh 1 compute engine instance (giống launch template của aws). Khi tạo instance template ko thể sửa, chỉ có thể clone ra rồi tạo version mới. Instance template có thể sử dụng across region và across gion
- Custom image = AMI: là image đã cài sẵn các patches và softwares. Custom image có thể được tạo từ 1 instance/ persistent disk/ snapshot/ image khác/ file trong Cloud Storage. Custom image có thể share với project khác/region khác. GCP cung cấp tính năng deprecate old image -> không ai có thể dùng được nữa, và ta có thể chỉ định image để thay thế image cũ đó. Để sử dụng custom image thì trong phần tạo instance ở mục boot disk ta change thành custom image và chọn image của mình
- Sole-tennant nodes = dedicated host -> lấy riêng 1 máy vật lý để tạo máy ảo cho mình. Cách làm: tạo node group, Lưu ý khi tạo node group cần tạo affinity labels -> những node có cùng label sẽ nằm trên máy vật lý đấy. Sau đó ta tạo virtual instance và vào management -> sole tenancy và thêm node affinity labels giống ở trên -> kết quả instance đấy sẽ được tạo trên máy vật lý ta chỉ định
- VM Manager -> OS patch management là tính năng dùng để manage fleet of instance (giống SSM) VD OS patch, OS config, OS inventory manage, software installed
- Firewall rule = security group


---

Live migration

- Là cách để giữ cho VM instances running khi host system thực hiện update software hoặc hardware bằng cách GCP sẽ tự động move instance sang host khác trong cùng zone.
- Live migration không thay đổi thuộc tính của VM
- Live migration support instance sử dụng local SSD, tuy nhiên không support GPU và preemptible instance
- Config ở "Availability Policy" của instance
- Các tùy chọn của "Availability Policy" của instance:
  - Preemptibility: tương tự spot instance của AWS
  - On host maintainance: để thiết lập migrate VM sang hardware khác khi có maintainance về infrastructure. Mặc định là "Migrate VM instance", tức enable
  - Automatic restart: mặc định là On -> VM instance sẽ tự động restart khi bị terminated không phải do người dùng thực hiện (VD trong maintainance event, hardware failure,...)
 
---

VM instance GPU
- Là loại VM dùng cho tính toán và đồ họa, phù hợp với AI/ML workload
- Chọn GPU instance type bằng tab GPU hoặc có thể chọn type thường sau đó add GPU (lưu ý không phải machine type nào cũng hỗ trợ thêm GPU)
- Khi dùng loại VM này cần sử dụng image có GPU libraries
- Với GPU instance "On host maintainance" chỉ có tùy chọn là "Terminate VM instance"

---

Compute engine instance bị tính phí theo giây (chi phí tối thiểu cần thanh toán là 1 phút)

Khi instance stop thì không bị tính phí, tuy nhiên vẫn bị tính phí storage

Saving cost khi dùng Compute Engine

- Sử dụng "substained use discounts":
  - Nguyên lý là khi thời gian sử dụng VM instance trong 1 tháng càng nhiều thì lượng discount càng nhiều. Nguyên tắc này được tự động áp dụng cho các instance tạo bởi Compute Engine và Google Kubernetes Engine
  - Có 1 số machine types không được áp dụng, VD E2, A2,..
- Sử dụng "Committed use discount":
  - Commit sử dụng VM instance từ 1-3 năm để hưởng ưu đãi (max 70%)
  - Áp dụng cho các instance tạo bởi Compute Engine và Google Kubernetes Engine
- Sử dụng "Spot VM":
  - Là instance có thể bị GCP thu hồi bất kỳ lúc nào. Trước khi thu hồi 30 giây sẽ có cảnh báo
  - Thường sử dụng cho các batch workload
  - Không có tính năng "Automatic restart"

  
