Cloud Run của Google Cloud Platform (GCP) là một dịch vụ serverless cho phép bạn chạy các container một cách tự động và theo yêu cầu mà không cần phải quản lý máy chủ. Bạn chỉ cần đẩy image container lên Cloud Run, và Google sẽ xử lý phần còn lại như khởi tạo, cân bằng tải, tự động mở rộng hoặc tắt các phiên bản dựa theo lượng traffic thực tế.

Trong Cloud Run, bạn tạo một "service" (dịch vụ), mỗi service là tập hợp các container được triển khai từ cùng một container image và cấu hình giống nhau. Mỗi service sẽ có một URL riêng (do Cloud Run cung cấp hoặc cấu hình domain riêng) để người dùng hoặc hệ thống truy cập.



Các tính năng nổi bật của Cloud Run gồm:

- Serverless: không cần quản lý hạ tầng, tự động mở rộng theo yêu cầu. Chi cần chi trả cho thực tế sử dụng (cpu, mem, request, network)

- Hỗ trợ tự động cân bằng tải (Khi có request từ người dùng đến URL của service, Cloud Run sẽ tự động phân phối tải giữa các instance container đang chạy của service đó.)

- hỗ trợ split traffic (chia phần lưu lượng truy cập) giữa các version khác nhau của một service

- Cloud Run sẽ tự động tạo mới hoặc thu gọn số lượng instance container dựa trên lưu lượng truy cập thực tế (auto-scaling).

- Cho phép gắn domain riêng, tự động cấp SSL.

- Thời gian chờ request dài hơn (lên tới 60 phút), hỗ trợ nhiều request đồng thời trên một instance giúp giảm chi phí và cải thiện độ trễ.

- Tích hợp với Cloud Tasks để xử lý các tác vụ không đồng bộ và giảm tải cho các backend.


Anthos là dịch vụ giúp xây dựng, triển khai và quản lý các ứng dụng trên môi trường đám mây lai (hybrid cloud) và đa đám mây (multi-cloud). Anthos giúp triển khai K8s cluster accross multiple node thuộc nhiều environment (on-prem, AWS, Azure,...)

Cloud Run for Anthos là một phiên bản của Cloud Run được tích hợp trong môi trường Anthos, cho phép bạn chạy các container serverless trên cụm Kubernetes của Anthos. Điều này giúp kết hợp ưu điểm của Cloud Run (serverless, tự động mở rộng) với khả năng quản lý Kubernetes và triển khai ứng dụng trên nhiều nền tảng thông qua Anthos.


Command

`gcloud run deploy <service_name> --image <image_url> --revision-suffix v1` : deploy service mới hoặc tạo revision mới (nếu service đã tồn tại)

`gcloud run revisions list` : liệt kê các revision

`gcloud run services update-traffic <service_name> --to-revision=v2=10,v1=90` : split traffic
